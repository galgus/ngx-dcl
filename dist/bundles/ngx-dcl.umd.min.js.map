{"version":3,"sources":["../esm2015/src/app/src/app/modules/dcl/dcl.component.ts","../esm2015/src/app/src/app/modules/dcl/dcl.module.ts"],"names":["getInjector","viewContainer","bindings","ctxInjector","parentInjector","Array","isArray","length","ReflectiveInjector","fromResolvedProviders","createComponent","cfr","type","vcr","projectableNodes","resolveComponentFactory","DclComponent","_cr","_renderer","_elem","_view","this","prototype","ngOnInit","_cmpRef","element","nativeElement","appendChild","location","init","identifier","data","text","createText","undefined","ngOnChanges","changes","removeChild","Component","args","selector","template","changeDetection","ChangeDetectionStrategy","OnPush","ComponentFactoryResolver","Renderer2","ElementRef","ViewContainerRef","Input","NgModule","imports","CommonModule","declarations","exports"],"mappings":"4WAuBA,IAAMA,EAAc,SAClBC,EACAC,GAEA,IAAMC,EAAcF,EAAcG,eAClC,OAAOC,MAAMC,QAAQJ,IAAaA,EAASK,OAAS,EAChDC,EAAAA,mBAAmBC,sBAAsBP,EAAUC,GACnDA,GAGAO,EAAkB,SACtBC,EACAC,EACAC,EACAX,EACAY,GAEA,OAAAD,EAAIH,gBACFC,EAAII,wBAAwBH,GAC5BC,EAAIN,OACJP,EAAYa,EAAKX,GACjBY,iBAgBF,SAAAE,EACUC,EACAC,EACAC,EACAC,GAHAC,KAAAJ,IAAAA,EACAI,KAAAH,UAAAA,EACAG,KAAAF,MAAAA,EACAE,KAAAD,MAAAA,SAGVJ,EAAAM,UAAAC,SAAA,WACE,GAAIF,KAAKT,KACPS,KAAKG,QAAUd,EAAgBW,KAAKJ,IAAKI,KAAKT,KAAMS,KAAKD,OACzDC,KAAKD,MAAMK,QAAQC,cAAcC,YAC/BN,KAAKG,QAAQI,SAASF,eAEpBL,KAAKQ,MACPR,KAAKQ,KAAKR,KAAKG,QAASH,KAAKS,WAAYT,KAAKU,UAE3C,CACL,IAAMC,EAAOX,KAAKH,UAAUe,WACZ,OAAdZ,KAAKU,WAA+BG,IAAdb,KAAKU,KAAqBV,KAAKU,KAAO,IAE9DV,KAAKH,UAAUS,YAAYN,KAAKF,MAAMO,cAAeM,KAIzDhB,EAAAM,UAAAa,YAAA,SAAYC,GACNf,KAAKG,UACPH,KAAKD,MAAMK,QAAQC,cAAcW,YAC/BhB,KAAKG,QAAQI,SAASF,eAExBL,KAAKE,sCA1CVe,EAAAA,UAASC,KAAA,CAAC,CACTC,SAAU,UACVC,SAAU,GACVC,gBAAiBC,EAAAA,wBAAwBC,oDA3CzCC,EAAAA,gCACAC,EAAAA,iBACAC,EAAAA,kBACAC,EAAAA,kDA2CCC,EAAAA,oBACAA,EAAAA,oBACAA,EAAAA,0BACAA,EAAAA,eC/CH,iCALCC,EAAAA,SAAQX,KAAA,CAAC,CACRY,QAAS,CAACC,EAAAA,cACVC,aAAc,CAACrC,GACfsC,QAAS,CAACtC","sourcesContent":["import {\n  Component,\n  OnInit,\n  ComponentRef,\n  ChangeDetectionStrategy,\n  Input,\n  Type,\n  ComponentFactoryResolver,\n  Renderer2,\n  ElementRef,\n  ViewContainerRef,\n  OnChanges,\n  SimpleChange,\n  ResolvedReflectiveProvider,\n  ReflectiveInjector\n} from '@angular/core';\n\nexport type InitFunc = (\n  component: ComponentRef<any>,\n  identifier: any,\n  data: any\n) => void;\n\nconst getInjector = (\n  viewContainer: ViewContainerRef,\n  bindings?: ResolvedReflectiveProvider[]\n) => {\n  const ctxInjector = viewContainer.parentInjector;\n  return Array.isArray(bindings) && bindings.length > 0\n    ? ReflectiveInjector.fromResolvedProviders(bindings, ctxInjector)\n    : ctxInjector;\n};\n\nconst createComponent = (\n  cfr: ComponentFactoryResolver,\n  type: any,\n  vcr: ViewContainerRef,\n  bindings?: ResolvedReflectiveProvider[],\n  projectableNodes?: any[][]\n): ComponentRef<any> =>\n  vcr.createComponent(\n    cfr.resolveComponentFactory(type),\n    vcr.length,\n    getInjector(vcr, bindings),\n    projectableNodes\n  );\n\n@Component({\n  selector: 'app-dcl',\n  template: '',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class DclComponent implements OnInit, OnChanges {\n  @Input() public type: Type<any>;\n  @Input() public init: InitFunc;\n  @Input() public data: any;\n  @Input() public identifier: any;\n\n  private _cmpRef: ComponentRef<any>;\n\n  constructor(\n    private _cr: ComponentFactoryResolver,\n    private _renderer: Renderer2,\n    private _elem: ElementRef,\n    private _view: ViewContainerRef\n  ) {}\n\n  ngOnInit() {\n    if (this.type) {\n      this._cmpRef = createComponent(this._cr, this.type, this._view);\n      this._view.element.nativeElement.appendChild(\n        this._cmpRef.location.nativeElement\n      );\n      if (this.init) {\n        this.init(this._cmpRef, this.identifier, this.data);\n      }\n    } else {\n      const text = this._renderer.createText(\n        this.data !== null && this.data !== undefined ? this.data : ''\n      );\n      this._renderer.appendChild(this._elem.nativeElement, text);\n    }\n  }\n\n  ngOnChanges(changes: { [propName: string]: SimpleChange }) {\n    if (this._cmpRef) {\n      this._view.element.nativeElement.removeChild(\n        this._cmpRef.location.nativeElement\n      );\n      this.ngOnInit();\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { DclComponent } from './dcl.component';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [DclComponent],\n  exports: [DclComponent]\n})\nexport class DclModule {}\n"]}