{"version":3,"file":"ngx-dcl.umd.js","sources":["../esm2015/src/app/src/app/modules/dcl/dcl.component.ts","../esm2015/src/app/src/app/modules/dcl/dcl.module.ts","../../ngx-dcl.ts"],"sourcesContent":["import {\n  Component,\n  OnInit,\n  ComponentRef,\n  ChangeDetectionStrategy,\n  Input,\n  Type,\n  ComponentFactoryResolver,\n  Renderer2,\n  ElementRef,\n  ViewContainerRef,\n  OnChanges,\n  SimpleChange,\n  ResolvedReflectiveProvider,\n  ReflectiveInjector\n} from '@angular/core';\n\nexport type InitFunc = (\n  component: ComponentRef<any>,\n  identifier: any,\n  data: any\n) => void;\n\nconst getInjector = (\n  viewContainer: ViewContainerRef,\n  bindings?: ResolvedReflectiveProvider[]\n) => {\n  const ctxInjector = viewContainer.parentInjector;\n  return Array.isArray(bindings) && bindings.length > 0\n    ? ReflectiveInjector.fromResolvedProviders(bindings, ctxInjector)\n    : ctxInjector;\n};\n\nconst createComponent = (\n  cfr: ComponentFactoryResolver,\n  type: any,\n  vcr: ViewContainerRef,\n  bindings?: ResolvedReflectiveProvider[],\n  projectableNodes?: any[][]\n): ComponentRef<any> =>\n  vcr.createComponent(\n    cfr.resolveComponentFactory(type),\n    vcr.length,\n    getInjector(vcr, bindings),\n    projectableNodes\n  );\n\n@Component({\n  selector: 'app-dcl',\n  template: '',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class DclComponent implements OnInit, OnChanges {\n  @Input() public type: Type<any>;\n  @Input() public init: InitFunc;\n  @Input() public data: any;\n  @Input() public identifier: any;\n\n  private _cmpRef: ComponentRef<any>;\n\n  constructor(\n    private _cr: ComponentFactoryResolver,\n    private _renderer: Renderer2,\n    private _elem: ElementRef,\n    private _view: ViewContainerRef\n  ) {}\n\n  ngOnInit() {\n    if (this.type) {\n      this._cmpRef = createComponent(this._cr, this.type, this._view);\n      this._view.element.nativeElement.appendChild(\n        this._cmpRef.location.nativeElement\n      );\n      if (this.init) {\n        this.init(this._cmpRef, this.identifier, this.data);\n      }\n    } else {\n      const text = this._renderer.createText(\n        this.data !== null && this.data !== undefined ? this.data : ''\n      );\n      this._renderer.appendChild(this._elem.nativeElement, text);\n    }\n  }\n\n  ngOnChanges(changes: { [propName: string]: SimpleChange }) {\n    if (this._cmpRef) {\n      this._view.element.nativeElement.removeChild(\n        this._cmpRef.location.nativeElement\n      );\n      this.ngOnInit();\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { DclComponent } from './dcl.component';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [DclComponent],\n  exports: [DclComponent]\n})\nexport class DclModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n\nexport {DclComponent as Éµa} from './src/app/modules/dcl/dcl.component';"],"names":["ReflectiveInjector","Component","ChangeDetectionStrategy","ComponentFactoryResolver","Renderer2","ElementRef","ViewContainerRef","Input","NgModule","CommonModule"],"mappings":";;;;;;IAuBA,IAAM,WAAW,GAAG,UAClB,aAA+B,EAC/B,QAAuC;QAEvC,IAAM,WAAW,GAAG,aAAa,CAAC,cAAc,CAAC;QACjD,OAAO,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC;cACjDA,uBAAkB,CAAC,qBAAqB,CAAC,QAAQ,EAAE,WAAW,CAAC;cAC/D,WAAW,CAAC;IAClB,CAAC,CAAC;;IAEF,IAAM,eAAe,GAAG,UACtB,GAA6B,EAC7B,IAAS,EACT,GAAqB,EACrB,QAAuC,EACvC,gBAA0B,IAE1B,OAAA,GAAG,CAAC,eAAe,CACjB,GAAG,CAAC,uBAAuB,CAAC,IAAI,CAAC,EACjC,GAAG,CAAC,MAAM,EACV,WAAW,CAAC,GAAG,EAAE,QAAQ,CAAC,EAC1B,gBAAgB,CACjB,GAAA,CAAC;;;QAeF,sBACU,GAA6B,EAC7B,SAAoB,EACpB,KAAiB,EACjB,KAAuB;YAHvB,QAAG,GAAH,GAAG,CAA0B;YAC7B,cAAS,GAAT,SAAS,CAAW;YACpB,UAAK,GAAL,KAAK,CAAY;YACjB,UAAK,GAAL,KAAK,CAAkB;SAC7B;QAEJ,+BAAQ,GAAR;YACE,IAAI,IAAI,CAAC,IAAI,EAAE;gBACb,IAAI,CAAC,OAAO,GAAG,eAAe,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;gBAChE,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,aAAa,CAAC,WAAW,CAC1C,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,aAAa,CACpC,CAAC;gBACF,IAAI,IAAI,CAAC,IAAI,EAAE;oBACb,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;iBACrD;aACF;iBAAM;gBACL,IAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,UAAU,CACpC,IAAI,CAAC,IAAI,KAAK,IAAI,IAAI,IAAI,CAAC,IAAI,KAAK,SAAS,GAAG,IAAI,CAAC,IAAI,GAAG,EAAE,CAC/D,CAAC;gBACF,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;aAC5D;SACF;QAED,kCAAW,GAAX,UAAY,OAA6C;YACvD,IAAI,IAAI,CAAC,OAAO,EAAE;gBAChB,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,aAAa,CAAC,WAAW,CAC1C,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,aAAa,CACpC,CAAC;gBACF,IAAI,CAAC,QAAQ,EAAE,CAAC;aACjB;SACF;;;;gBA5CFC,cAAS,SAAC;oBACT,QAAQ,EAAE,SAAS;oBACnB,QAAQ,EAAE,EAAE;oBACZ,eAAe,EAAEC,4BAAuB,CAAC,MAAM;iBAChD;;;gBA5CCC,6BAAwB;gBACxBC,cAAS;gBACTC,eAAU;gBACVC,qBAAgB;;;uBA2CfC,UAAK;uBACLA,UAAK;uBACLA,UAAK;6BACLA,UAAK;;;;QC/CR;;;;;gBALCC,aAAQ,SAAC;oBACR,OAAO,EAAE,CAACC,mBAAY,CAAC;oBACvB,YAAY,EAAE,CAAC,YAAY,CAAC;oBAC5B,OAAO,EAAE,CAAC,YAAY,CAAC;iBACxB;;;ICRD;;;;;;;;;;;;;"}